<!DOCTYPE html>
<html lang="zh-CN" class="dark-mode-transition">

<head>
  <meta charset="utf-8">
  <title>代理规则集</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <link href="favicon.png" rel="icon" type="image/png">
  <meta name="description" content="自用收集代理工具规则集">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap">
  <style>
    :root {
      --primary-color: #3b82f6;
      --primary-hover: #2563eb;
      --secondary-color: #6366f1;
      --accent-color: #8b5cf6;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --error-color: #ef4444;
      --background-light: #f9fafb;
      --card-light: #ffffff;
      --text-light: #1f2937;
      --text-light-secondary: #4b5563;
      --background-dark: #111827;
      --card-dark: #1f2937;
      --text-dark: #f3f4f6;
      --text-dark-secondary: #9ca3af;
    }

    body {
      font-family: 'Noto Sans SC', sans-serif;
      scroll-behavior: smooth;
      background-image: linear-gradient(to right bottom, rgba(249, 250, 251, 0.01) 0%, rgba(249, 250, 251, 0.1) 100%);
    }
    
    .dark body {
      background-image: linear-gradient(to right bottom, rgba(17, 24, 39, 0.01) 0%, rgba(17, 24, 39, 0.1) 100%);
    }

    .dark-mode-transition {
      transition: background-color 0.5s ease, color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
    }

    .card-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    }

    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dark .card-hover {
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .dark .card-hover:hover {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn-primary {
      background-color: rgba(59, 130, 246, 0.8);
      color: white;
      transition: all 0.2s ease;
      border-radius: 12px;
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      font-size: 0.8rem;
      padding: 0.35rem 0.75rem;
    }

    .btn-primary:hover {
      background-color: rgba(37, 99, 235, 0.85);
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.25);
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .btn-secondary {
      background-color: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-light-secondary);
      transition: all 0.2s ease;
      border-radius: 12px;
      font-size: 0.8rem;
      padding: 0.35rem 0.75rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .dark .btn-secondary {
      background-color: rgba(30, 41, 59, 0.5);
      border-color: rgba(255, 255, 255, 0.05);
      color: var(--text-dark-secondary);
    }

    .btn-secondary:hover {
      background-color: rgba(243, 244, 246, 0.2);
      transform: translateY(-1px);
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dark .btn-secondary:hover {
      background-color: rgba(55, 65, 81, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn-secondary:active {
      transform: translateY(1px);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .btn-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 9999px;
      padding: 0.5rem;
      transition: all 0.2s ease;
      background-color: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .btn-icon:hover {
      background-color: rgba(243, 244, 246, 0.2);
      transform: translateY(-1px);
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dark .btn-icon {
      background-color: rgba(30, 41, 59, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .dark .btn-icon:hover {
      background-color: rgba(55, 65, 81, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .copy-animation {
      animation: copy-pulse 0.5s cubic-bezier(0.4, 0, 0.6, 1);
    }

    @keyframes copy-pulse {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.9;
        transform: scale(1.05);
      }
    }

    .notification-animation {
      animation: slide-up-fade 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slide-up-fade {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .body-noscroll {
      overflow: hidden;
    }

    /* 自定义滚动条 */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .dark ::-webkit-scrollbar-track {
      background: #2d3748;
    }

    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1a1;
    }

    .dark ::-webkit-scrollbar-thumb {
      background: #4a5568;
    }

    .dark ::-webkit-scrollbar-thumb:hover {
      background: #718096;
    }

    /* 波浪动画 */
    .wave {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100px;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%233b82f6" fill-opacity="0.1" d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
      background-size: cover;
      background-repeat: no-repeat;
    }

    .dark .wave {
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%232563eb" fill-opacity="0.1" d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
    }

    /* 闪光效果 */
    .shine {
      position: relative;
      overflow: hidden;
    }

    .shine::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      transform: rotate(30deg);
      animation: shine 3s infinite;
    }

    .dark .shine::after {
      background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0) 100%
      );
    }

    @keyframes shine {
      0% {
        left: -100%;
        opacity: 0;
      }
      10% {
        opacity: 0.5;
      }
      20% {
        left: 100%;
        opacity: 0;
      }
      100% {
        left: 100%;
        opacity: 0;
      }
    }

    /* 标签样式 */
    .tag {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 500;
      background-color: rgba(59, 130, 246, 0.1);
      color: var(--primary-color);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(59, 130, 246, 0.1);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
    }

    .dark .tag {
      background-color: rgba(59, 130, 246, 0.15);
      border: 1px solid rgba(59, 130, 246, 0.2);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    /* 模态窗口动画 */
    .modal-enter {
      animation: modal-in 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes modal-in {
      0% {
        opacity: 0;
        transform: scale(0.95);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* 加载动画 */
    .loading {
      display: inline-block;
      width: 1.5rem;
      height: 1.5rem;
      border: 3px solid rgba(59, 130, 246, 0.3);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              DEFAULT: '#3b82f6',
              50: '#eff6ff',
              100: '#dbeafe',
              200: '#bfdbfe',
              300: '#93c5fd',
              400: '#60a5fa',
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a',
            },
            secondary: {
              DEFAULT: '#6366f1',
              50: '#eef2ff',
              100: '#e0e7ff',
              200: '#c7d2fe',
              300: '#a5b4fc',
              400: '#818cf8',
              500: '#6366f1',
              600: '#4f46e5',
              700: '#4338ca',
              800: '#3730a3',
              900: '#312e81',
            },
          },
          fontFamily: {
            sans: ['Noto Sans SC', 'sans-serif'],
          },
          animation: {
            'bounce-slow': 'bounce 3s infinite',
          },
        },
      },
    }

    // 检查系统是否为暗模式，或用户是否已设置暗模式
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }
  </script>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 dark-mode-transition">
  <div class="min-h-screen flex flex-col">
    <header class="relative shadow-sm dark-mode-transition overflow-hidden backdrop-blur-md bg-white/70 dark:bg-gray-800/70">
      <div class="wave"></div>
      <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="flex justify-between items-center">
          <div>
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white dark-mode-transition flex items-center">
              <span class="shine mr-2">🌐</span>  代理规则集
            </h1>
            <p class="mt-2 text-sm text-gray-600 dark:text-gray-400 dark-mode-transition">
              由 <a href="https://nav.zcsouls.com" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 hover:underline transition-colors">fl0w1nd</a> 整理的代理工具规则集 | 
              <a href="https://github.com/fl0w1nd/NetworkConfig/" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400 hover:underline transition-colors">
                <i class="fab fa-github mr-1"></i>GitHub 源码
              </a>
            </p>
            <div class="mt-1 text-xs text-gray-500 dark:text-gray-500 flex items-center">
              <i class="far fa-clock mr-1"></i> 最后更新: 2025-06-06 11:44
              <span class="tag ml-3">v2.0</span>
            </div>
          </div>
          <button id="theme-toggle" class="btn-icon">
            <i id="theme-toggle-dark-icon" class="fas fa-moon hidden text-lg"></i>
            <i id="theme-toggle-light-icon" class="fas fa-sun hidden text-lg"></i>
          </button>
        </div>
      </div>
    </header>

    <main class="flex-grow max-w-7xl w-full mx-auto py-8 px-4 sm:px-6 lg:px-8">
      <!-- 客户端选择器 -->
      <div class="mb-8">
        <div class="bg-white/90 dark:bg-gray-800/90 overflow-hidden shadow-sm rounded-xl border border-gray-100/50 dark:border-gray-700/50 dark-mode-transition">
          <div class="px-6 py-5 border-b border-gray-200/50 dark:border-gray-700/50">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white dark-mode-transition flex items-center">
              <i class="fas fa-mobile-alt mr-3 text-primary-500"></i>选择代理客户端类型
            </h2>
          </div>
          <div class="px-6 py-5">
            <div class="flex flex-wrap gap-4">
              <button id="clash-stash-btn" class="client-btn inline-flex items-center px-5 py-2.5 text-sm font-medium rounded-lg text-white transition-all active bg-primary-500 border border-white/10 shadow-sm hover:shadow-md hover:bg-primary-600">
                <i class="fas fa-globe mr-2"></i> Clash Meta / Stash
              </button>
              <button id="shadowrocket-btn" class="client-btn inline-flex items-center px-5 py-2.5 text-sm font-medium rounded-lg shadow-sm transition-all dark-mode-transition bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-200/80 dark:border-gray-700/80 hover:bg-gray-50 dark:hover:bg-gray-700 hover:shadow-md">
                <i class="fas fa-rocket mr-2"></i> Shadowrocket
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 配置文件 -->
      <div id="config-section" class="mb-8">
        <div class="backdrop-blur-md bg-white/70 dark:bg-gray-800/70 overflow-hidden shadow-sm rounded-xl border border-gray-100/50 dark:border-gray-700/50 dark-mode-transition">
          <div class="px-6 py-5 border-b border-gray-200/50 dark:border-gray-700/50">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white dark-mode-transition flex items-center">
              <i class="fas fa-file-code mr-3 text-primary-500"></i>配置模板
            </h2>
          </div>
          <div class="px-6 py-5">
            <div id="clash-meta-config" class="config-item">
              <div class="flex items-center justify-between p-5 mb-4 backdrop-blur-md bg-gray-50/70 dark:bg-gray-700/70 rounded-xl card-hover dark-mode-transition">
                <div class="flex items-center">
                  <div class="w-12 h-12 rounded-full bg-primary-100/90 dark:bg-primary-900/90 flex items-center justify-center mr-4 shadow-sm">
                    <img src="icon/ClashMeta.png" alt="Clash Meta" class="w-8 h-8" onerror="this.src='icon/default.png'; this.onerror=null;">
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold dark-mode-transition">ClashMeta.yaml</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 dark-mode-transition">Clash Meta 配置模板文件</p>
                  </div>
                </div>
                <div class="flex gap-3">
                  <button class="preview-btn btn-secondary flex items-center" data-path="Conf/ClashMeta.yaml" data-name="ClashMeta.yaml">
                    <i class="fas fa-eye mr-2"></i> 预览
                  </button>
                  <button onclick="copyToClipboard('Conf/ClashMeta.yaml')" class="btn-primary flex items-center">
                    <i class="fas fa-copy mr-2"></i> 复制
                  </button>
                </div>
              </div>
              <div class="flex items-center justify-between p-5 mb-4 bg-gray-50 dark:bg-gray-700 rounded-xl card-hover dark-mode-transition">
                <div class="flex items-center">
                  <div class="w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center mr-4">
                    <img src="icon/Stash.png" alt="Stash" class="w-8 h-8" onerror="this.src='icon/default.png'; this.onerror=null;">
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold dark-mode-transition">Stash.yaml</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 dark-mode-transition">Stash 配置模板文件</p>
                  </div>
                </div>
                <div class="flex gap-3">
                  <button class="preview-btn btn-secondary flex items-center" data-path="Conf/Stash.yaml" data-name="Stash.yaml">
                    <i class="fas fa-eye mr-2"></i> 预览
                  </button>
                  <button onclick="copyToClipboard('Conf/Stash.yaml')" class="btn-primary flex items-center">
                    <i class="fas fa-copy mr-2"></i> 复制
                  </button>
                </div>
              </div>
            </div>
            <div id="shadowrocket-config" class="config-item hidden">
              <div class="flex items-center justify-between p-5 mb-4 bg-gray-50 dark:bg-gray-700 rounded-xl card-hover dark-mode-transition">
                <div class="flex items-center">
                  <div class="w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center mr-4">
                    <img src="icon/Shadowrocket.png" alt="Shadowrocket" class="w-8 h-8" onerror="this.src='icon/default.png'; this.onerror=null;">
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold dark-mode-transition">Shadowrocket.conf</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 dark-mode-transition">Shadowrocket 配置模板文件</p>
                  </div>
                </div>
                <div class="flex gap-3">
                  <button class="preview-btn btn-secondary flex items-center" data-path="Conf/Shadowrocket.conf" data-name="Shadowrocket.conf">
                    <i class="fas fa-eye mr-2"></i> 预览
                  </button>
                  <button onclick="copyToClipboard('Conf/Shadowrocket.conf')" class="btn-primary flex items-center">
                    <i class="fas fa-copy mr-2"></i> 复制
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 规则列表 -->
      <div class="backdrop-blur-md bg-white/70 dark:bg-gray-800/70 overflow-hidden shadow-sm rounded-xl border border-gray-100/50 dark:border-gray-700/50 dark-mode-transition">
        <div class="px-6 py-5 border-b border-gray-200/50 dark:border-gray-700/50">
          <div class="flex justify-between items-center">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white dark-mode-transition flex items-center">
              <i class="fas fa-list-alt mr-3 text-primary-500"></i>规则列表
            </h2>
            <div class="relative">
              <input type="text" id="rule-search" placeholder="搜索规则..." class="pl-10 pr-4 py-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500/50 dark:focus:ring-primary-400/50 dark-mode-transition shadow-sm">
              <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
          </div>
        </div>
        <div class="px-6 py-5">
          <div id="clash-meta-rules" class="rules-container grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
            <!-- Clash Meta Rules will be populated here -->
            <div class="flex justify-center items-center col-span-full py-10">
              <div class="loading"></div>
              <span class="ml-3 text-gray-500 dark:text-gray-400">加载规则中...</span>
            </div>
          </div>
          <div id="shadowrocket-rules" class="rules-container hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
            <!-- Shadowrocket Rules will be populated here -->
            <div class="flex justify-center items-center col-span-full py-10">
              <div class="loading"></div>
              <span class="ml-3 text-gray-500 dark:text-gray-400">加载规则中...</span>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="backdrop-blur-md bg-white/70 dark:bg-gray-800/70 mt-auto border-t border-gray-100/50 dark:border-gray-700/50 dark-mode-transition">
      <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="text-center md:text-left mb-4 md:mb-0">
            <p class="text-sm text-gray-500 dark:text-gray-400 dark-mode-transition">
              © 2025 fl0w1nd 不保留任何权利
            </p>
          </div>
          <div class="flex space-x-4">
            <a href="https://github.com/fl0w1nd" class="btn-icon text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 p-2">
              <i class="fab fa-github text-xl"></i>
            </a>
            <a href="mailto:fl0w1nd@zcsouls.com" class="btn-icon text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 p-2">
              <i class="fas fa-envelope text-xl"></i>
            </a>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <!-- 成功通知 -->
  <div id="copy-notification" class="fixed bottom-4 right-4 backdrop-blur-md bg-green-500/90 text-white px-4 py-3 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 flex items-center border border-white/20">
    <i class="fas fa-check-circle mr-2"></i> 已复制到剪贴板
  </div>

  <!-- 预览模态窗口 -->
  <div id="preview-modal" class="fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30 hidden backdrop-blur-sm">
    <div class="backdrop-blur-md bg-white/90 dark:bg-gray-800/90 rounded-xl shadow-2xl w-11/12 md:w-3/4 lg:w-2/3 max-h-[80vh] flex flex-col dark-mode-transition modal-enter border border-white/20 dark:border-gray-700/30">
      <div class="px-6 py-4 border-b border-gray-200/50 dark:border-gray-700/50 flex justify-between items-center">
        <h3 id="preview-title" class="text-lg font-medium text-gray-900 dark:text-white dark-mode-transition flex items-center">
          <i class="fas fa-file-alt mr-2 text-primary-500"></i> 规则预览
        </h3>
        <button id="close-preview" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 btn-icon">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="p-6 overflow-auto flex-grow" id="preview-scroll-container">
        <pre id="preview-content" class="whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200 font-mono backdrop-blur-md bg-gray-50/70 dark:bg-gray-700/70 p-4 rounded-lg border border-gray-100/50 dark:border-gray-600/50"></pre>
      </div>
      <div class="px-6 py-4 border-t border-gray-200/50 dark:border-gray-700/50 flex justify-end">
        <button id="copy-preview" class="btn-primary flex items-center mr-3">
          <i class="fas fa-copy mr-2"></i> 复制内容
        </button>
        <button id="close-preview-btn" class="btn-secondary flex items-center">
          <i class="fas fa-times mr-2"></i> 关闭
        </button>
      </div>
    </div>
  </div>

  <script>
    // 规则数据
    const rulesets = {
      'clash-meta': [
        { name: 'AppleCDN', path: 'Rules/Clash Meta/AppleCDN.list', description: 'Apple 内容分发网络规则' },
        { name: 'E-hentai', path: 'Rules/Clash Meta/E-hentai.list', description: 'E-hentai 网站规则' },
        { name: 'SteamCommunity', path: 'Rules/Clash Meta/SteamCommunity.list', description: 'Steam 社区规则' },
        { name: 'ChinaDomain', path: 'Rules/Clash Meta/ChinaDomain.list', description: '中国大陆域名规则' },
        { name: 'OpenAi', path: 'Rules/Clash Meta/OpenAi.list', description: 'OpenAI 相关规则' },
        { name: 'Origin', path: 'Rules/Clash Meta/Origin.list', description: 'EA Origin 平台规则' },
        { name: 'SteamCN', path: 'Rules/Clash Meta/SteamCN.list', description: 'Steam 中国规则' },
        { name: 'Apple', path: 'Rules/Clash Meta/Apple.list', description: 'Apple 服务规则' },
        { name: 'LocalAreaNetwork', path: 'Rules/Clash Meta/LocalAreaNetwork.list', description: '本地局域网规则' },
        { name: 'ChinaCompanyIp', path: 'Rules/Clash Meta/ChinaCompanyIp.list', description: '中国公司 IP 规则' },
        { name: 'GoogleFCM', path: 'Rules/Clash Meta/GoogleFCM.list', description: 'Google FCM 推送规则' },
        { name: 'Twitter', path: 'Rules/Clash Meta/Twitter.list', description: 'Twitter 规则' },
        { name: 'MicrosoftCDN', path: 'Rules/Clash Meta/MicrosoftCDN.list', description: 'Microsoft CDN 规则' },
        { name: 'Bing', path: 'Rules/Clash Meta/Bing.list', description: 'Bing 搜索规则' },
        { name: 'Microsoft', path: 'Rules/Clash Meta/Microsoft.list', description: 'Microsoft 服务规则' },
        { name: 'Copilot', path: 'Rules/Clash Meta/Copilot.list', description: 'Microsoft Copilot 规则' },
        { name: 'Sony', path: 'Rules/Clash Meta/Sony.list', description: 'Sony 服务规则' },
        { name: 'Epic', path: 'Rules/Clash Meta/Epic.list', description: 'Epic 游戏商店规则' },
        { name: 'Xbox', path: 'Rules/Clash Meta/Xbox.list', description: 'Xbox 规则' },
        { name: 'Ubisoft', path: 'Rules/Clash Meta/Ubisoft.list', description: 'Ubisoft 规则' },
        { name: 'Rockstar', path: 'Rules/Clash Meta/Rockstar.list', description: 'Rockstar 规则' },
        { name: 'Telegram', path: 'Rules/Clash Meta/Telegram.list', description: 'Telegram 规则' },
        { name: 'GoogleCN', path: 'Rules/Clash Meta/GoogleCN.list', description: 'Google 中国规则' },
        { name: 'BT', path: 'Rules/Clash Meta/BT.list', description: 'BT 下载规则' },
        { name: 'PrivateTracker', path: 'Rules/Clash Meta/PrivateTracker.list', description: '私有 Tracker 规则' },
        { name: 'ProxyGFWlist', path: 'Rules/Clash Meta/ProxyGFWlist.list', description: 'GFWList 代理规则' },
        { name: 'Global', path: 'Rules/Clash Meta/Global.list', description: '全球规则' },
        { name: 'Google', path: 'Rules/Clash Meta/Google.list', description: 'Google 服务规则' },
        { name: 'YouTube', path: 'Rules/Clash Meta/YouTube.list', description: 'YouTube 规则' },
        { name: 'YouTubeMusic', path: 'Rules/Clash Meta/YouTubeMusic.list', description: 'YouTube Music 规则' },
        { name: 'Twitch', path: 'Rules/Clash Meta/Twitch.list', description: 'Twitch 规则' },
        { name: 'Disney', path: 'Rules/Clash Meta/Disney.list', description: '迪士尼服务规则' },
        { name: 'TikTok', path: 'Rules/Clash Meta/TikTok.list', description: 'TikTok 规则' },
        { name: 'Nintendo', path: 'Rules/Clash Meta/Nintendo.list', description: '任天堂服务规则' },
        { name: 'Spotify', path: 'Rules/Clash Meta/Spotify.list', description: 'Spotify 规则' },
        { name: 'ProxyMedia', path: 'Rules/Clash Meta/ProxyMedia.list', description: '国外媒体，包含 Netflix、YouTube、TikTok...' },
        { name: 'Download', path: 'Rules/Clash Meta/Download.list', description: '下载规则' },
        { name: 'Stun', path: 'Rules/Clash Meta/Stun.list', description: 'Stun 规则' },
        { name: 'OneDrive', path: 'Rules/Clash Meta/OneDrive.list', description: 'OneDrive 规则' },
        { name: 'Netflix', path: 'Rules/Clash Meta/Netflix.list', description: 'Netflix 规则' }
      ],
      'shadowrocket': [
        { name: 'AppleCDN', path: 'Rules/Shadowrocket/AppleCDN.list', description: 'Apple 内容分发网络规则' },
        { name: 'E-hentai', path: 'Rules/Shadowrocket/E-hentai.list', description: 'E-hentai 网站规则' },
        { name: 'SteamCommunity', path: 'Rules/Shadowrocket/SteamCommunity.list', description: 'Steam 社区规则' },
        { name: 'ChinaDomain', path: 'Rules/Shadowrocket/ChinaDomain.list', description: '中国大陆域名规则' },
        { name: 'OpenAi', path: 'Rules/Shadowrocket/OpenAi.list', description: 'OpenAI 相关规则' },
        { name: 'Origin', path: 'Rules/Shadowrocket/Origin.list', description: 'EA Origin 平台规则' },
        { name: 'SteamCN', path: 'Rules/Shadowrocket/SteamCN.list', description: 'Steam 中国规则' },
        { name: 'Apple', path: 'Rules/Shadowrocket/Apple.list', description: 'Apple 服务规则' },
        { name: 'LocalAreaNetwork', path: 'Rules/Shadowrocket/LocalAreaNetwork.list', description: '本地局域网规则' },
        { name: 'ChinaCompanyIp', path: 'Rules/Shadowrocket/ChinaCompanyIp.list', description: '中国公司 IP 规则' },
        { name: 'GoogleFCM', path: 'Rules/Shadowrocket/GoogleFCM.list', description: 'Google FCM 推送规则' },
        { name: 'Twitter', path: 'Rules/Shadowrocket/Twitter.list', description: 'Twitter 规则' },
        { name: 'MicrosoftCDN', path: 'Rules/Shadowrocket/MicrosoftCDN.list', description: 'Microsoft CDN 规则' },
        { name: 'Bing', path: 'Rules/Shadowrocket/Bing.list', description: 'Bing 搜索规则' },
        { name: 'Microsoft', path: 'Rules/Shadowrocket/Microsoft.list', description: 'Microsoft 服务规则' },
        { name: 'Copilot', path: 'Rules/Shadowrocket/Copilot.list', description: 'Microsoft Copilot 规则' },
        { name: 'Sony', path: 'Rules/Shadowrocket/Sony.list', description: 'Sony 服务规则' },
        { name: 'Epic', path: 'Rules/Shadowrocket/Epic.list', description: 'Epic 游戏商店规则' },
        { name: 'Xbox', path: 'Rules/Shadowrocket/Xbox.list', description: 'Xbox 规则' },
        { name: 'Ubisoft', path: 'Rules/Shadowrocket/Ubisoft.list', description: 'Ubisoft 规则' },
        { name: 'Rockstar', path: 'Rules/Shadowrocket/Rockstar.list', description: 'Rockstar 规则' },
        { name: 'Telegram', path: 'Rules/Shadowrocket/Telegram.list', description: 'Telegram 规则' },
        { name: 'GoogleCN', path: 'Rules/Shadowrocket/GoogleCN.list', description: 'Google 中国规则' },
        { name: 'BT', path: 'Rules/Shadowrocket/BT.list', description: 'BT 下载规则' },
        { name: 'PrivateTracker', path: 'Rules/Shadowrocket/PrivateTracker.list', description: '私有 Tracker 规则' },
        { name: 'ProxyGFWlist', path: 'Rules/Shadowrocket/ProxyGFWlist.list', description: 'GFWList 代理规则' },
        { name: 'Global', path: 'Rules/Shadowrocket/Global.list', description: '全球规则' },
        { name: 'Google', path: 'Rules/Shadowrocket/Google.list', description: 'Google 服务规则' },
        { name: 'YouTube', path: 'Rules/Shadowrocket/YouTube.list', description: 'YouTube 规则' },
        { name: 'YouTubeMusic', path: 'Rules/Shadowrocket/YouTubeMusic.list', description: 'YouTube Music 规则' },
        { name: 'Twitch', path: 'Rules/Shadowrocket/Twitch.list', description: 'Twitch 规则' },
        { name: 'Disney', path: 'Rules/Shadowrocket/Disney.list', description: '迪士尼服务规则' },
        { name: 'TikTok', path: 'Rules/Shadowrocket/TikTok.list', description: 'TikTok 规则' },
        { name: 'Spotify', path: 'Rules/Shadowrocket/Spotify.list', description: 'Spotify 规则' },
        { name: 'Nintendo', path: 'Rules/Shadowrocket/Nintendo.list', description: '任天堂服务规则' },
        { name: 'ProxyMedia', path: 'Rules/Shadowrocket/ProxyMedia.list', description: '国外媒体，包含 Netflix、YouTube、TikTok...' },
        { name: 'Download', path: 'Rules/Shadowrocket/Download.list', description: '下载规则' },
        { name: 'Stun', path: 'Rules/Shadowrocket/Stun.list', description: 'Stun 规则' },
        { name: 'OneDrive', path: 'Rules/Shadowrocket/OneDrive.list', description: 'OneDrive 规则' },
        { name: 'Netflix', path: 'Rules/Shadowrocket/Netflix.list', description: 'Netflix 规则' }
      ]
    };

    // Stash 使用与 Clash Meta 相同的规则集
    rulesets['stash'] = rulesets['clash-meta'];

    // 创建规则卡片
    function createRuleCards(filter = '') {
      const clashMetaContainer = document.getElementById('clash-meta-rules');
      const shadowrocketContainer = document.getElementById('shadowrocket-rules');
      
      // 清空容器
      clashMetaContainer.innerHTML = '';
      shadowrocketContainer.innerHTML = '';
      
      // 过滤规则
      const filteredClashMeta = rulesets['clash-meta'].filter(rule => 
        rule.name.toLowerCase().includes(filter.toLowerCase()) || 
        rule.description.toLowerCase().includes(filter.toLowerCase())
      );
      
      const filteredShadowrocket = rulesets['shadowrocket'].filter(rule => 
        rule.name.toLowerCase().includes(filter.toLowerCase()) || 
        rule.description.toLowerCase().includes(filter.toLowerCase())
      );
      
      // 创建 Clash Meta 规则卡片
      if (filteredClashMeta.length === 0) {
        clashMetaContainer.innerHTML = `
          <div class="col-span-full py-10 text-center">
            <i class="fas fa-search text-4xl text-gray-300 dark:text-gray-600 mb-3"></i>
            <p class="text-gray-500 dark:text-gray-400">未找到匹配的规则</p>
          </div>
        `;
      } else {
        filteredClashMeta.forEach(rule => {
          const card = createRuleCard(rule, 'clash-meta');
          clashMetaContainer.appendChild(card);
        });
      }
      
      // 创建 Shadowrocket 规则卡片
      if (filteredShadowrocket.length === 0) {
        shadowrocketContainer.innerHTML = `
          <div class="col-span-full py-10 text-center">
            <i class="fas fa-search text-4xl text-gray-300 dark:text-gray-600 mb-3"></i>
            <p class="text-gray-500 dark:text-gray-400">未找到匹配的规则</p>
          </div>
        `;
      } else {
        filteredShadowrocket.forEach(rule => {
          const card = createRuleCard(rule, 'shadowrocket');
          shadowrocketContainer.appendChild(card);
        });
      }
    }
    
    // 创建单个规则卡片
    function createRuleCard(rule, clientType) {
      const card = document.createElement('div');
      card.className = 'overflow-hidden rounded-xl transition card-hover dark-mode-transition';
      
      const ruleUrl = window.location.origin + '/' + rule.path;
      const iconPath = `icon/${rule.name}.png`;
      
      card.innerHTML = `
        <div class="p-5">
          <div class="flex items-center mb-3">
            <div class="w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center mr-3 shadow-sm">
              <img src="${iconPath}" alt="${rule.name}" class="w-6 h-6" onerror="this.src='icon/default.png'; this.onerror=null;">
            </div>
            <h3 class="text-md font-semibold truncate dark-mode-transition">${rule.name}</h3>
          </div>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-4 h-10 line-clamp-2">${rule.description}</p>
          <div class="flex justify-between items-center gap-2">
            <button class="preview-btn btn-secondary flex-1 flex items-center justify-center" data-path="${rule.path}" data-name="${rule.name}">
              <i class="fas fa-eye mr-1.5"></i> 预览
            </button>
            <button onclick="copyToClipboard('${rule.path}')" class="btn-primary flex-1 flex items-center justify-center">
              <i class="fas fa-copy mr-1.5"></i> 复制
            </button>
          </div>
        </div>
      `;
      
      return card;
    }
    
    // 获取并显示规则内容
    async function previewRule(path, name) {
      const modal = document.getElementById('preview-modal');
      const content = document.getElementById('preview-content');
      const title = document.getElementById('preview-title');
      
      title.innerHTML = `<i class="fas fa-file-alt mr-2 text-primary-500"></i> ${name} 规则预览`;
      content.innerHTML = `<div class="flex justify-center items-center py-10">
        <div class="loading"></div>
        <span class="ml-3 text-gray-500 dark:text-gray-400">加载中...</span>
      </div>`;
      
      modal.classList.remove('hidden');
      
      // 禁用背景滚动
      document.body.classList.add('body-noscroll');
      
      try {
        const response = await fetch(path);
        if (response.ok) {
          const text = await response.text();
          content.textContent = text;
          
          // 存储当前预览内容，用于复制
          document.getElementById('copy-preview').setAttribute('data-content', text);
        } else {
          content.innerHTML = `
            <div class="flex flex-col items-center justify-center py-10 text-center">
              <i class="fas fa-exclamation-circle text-4xl text-red-500 mb-3"></i>
              <p class="text-red-500 font-medium">加载失败: ${response.status} ${response.statusText}</p>
              <p class="text-gray-500 dark:text-gray-400 mt-2">请稍后重试或联系管理员</p>
            </div>
          `;
        }
      } catch (error) {
        content.innerHTML = `
          <div class="flex flex-col items-center justify-center py-10 text-center">
            <i class="fas fa-exclamation-triangle text-4xl text-yellow-500 mb-3"></i>
            <p class="text-yellow-500 font-medium">加载错误: ${error.message}</p>
            <p class="text-gray-500 dark:text-gray-400 mt-2">请检查网络连接后重试</p>
          </div>
        `;
      }
    }
    
    // 复制到剪贴板
    function copyToClipboard(path) {
      const fullUrl = window.location.origin + '/' + path;
      navigator.clipboard.writeText(fullUrl).then(() => {
        // 添加复制动画
        const btns = document.querySelectorAll('.copy-btn');
        btns.forEach(btn => {
          if (btn.innerHTML.includes(path.split('/').pop())) {
            btn.classList.add('copy-animation');
            setTimeout(() => {
              btn.classList.remove('copy-animation');
            }, 500);
          }
        });
        
        // 显示成功通知
        const notification = document.getElementById('copy-notification');
        notification.classList.add('notification-animation');
        notification.style.opacity = '1';
        setTimeout(() => {
          notification.style.opacity = '0';
          notification.classList.remove('notification-animation');
        }, 2000);
      });
    }
    
    // 复制预览内容
    function copyPreviewContent() {
      const content = document.getElementById('copy-preview').getAttribute('data-content');
      if (content) {
        navigator.clipboard.writeText(content).then(() => {
          // 显示成功通知
          const notification = document.getElementById('copy-notification');
          notification.innerHTML = '<i class="fas fa-check-circle mr-2"></i> 规则内容已复制到剪贴板';
          notification.classList.add('notification-animation');
          notification.style.opacity = '1';
          setTimeout(() => {
            notification.style.opacity = '0';
            notification.classList.remove('notification-animation');
            notification.innerHTML = '<i class="fas fa-check-circle mr-2"></i> 已复制到剪贴板';
          }, 2000);
        });
      }
    }
    
    // 切换客户端类型
    function switchClientType(type) {
      const clashStashBtn = document.getElementById('clash-stash-btn');
      const shadowrocketBtn = document.getElementById('shadowrocket-btn');
      const clashMetaConfig = document.getElementById('clash-meta-config');
      const shadowrocketConfig = document.getElementById('shadowrocket-config');
      const clashMetaRules = document.getElementById('clash-meta-rules');
      const shadowrocketRules = document.getElementById('shadowrocket-rules');
      
      // 添加点击效果
      if (type === 'clash-meta') {
        clashStashBtn.classList.add('btn-click');
        setTimeout(() => { clashStashBtn.classList.remove('btn-click'); }, 200);
      } else {
        shadowrocketBtn.classList.add('btn-click');
        setTimeout(() => { shadowrocketBtn.classList.remove('btn-click'); }, 200);
      }
      
      if (type === 'clash-meta') {
        clashStashBtn.classList.add('bg-primary-500', 'text-white');
        clashStashBtn.classList.remove('bg-white', 'text-gray-700', 'border-gray-300', 'dark:bg-gray-800', 'dark:text-gray-300', 'dark:border-gray-600');
        shadowrocketBtn.classList.add('bg-white', 'text-gray-700', 'border-gray-300', 'dark:bg-gray-800', 'dark:text-gray-300', 'dark:border-gray-600');
        shadowrocketBtn.classList.remove('bg-primary-500', 'text-white');
        
        clashMetaConfig.classList.remove('hidden');
        shadowrocketConfig.classList.add('hidden');
        
        clashMetaRules.classList.remove('hidden');
        shadowrocketRules.classList.add('hidden');
      } else {
        shadowrocketBtn.classList.add('bg-primary-500', 'text-white');
        shadowrocketBtn.classList.remove('bg-white', 'text-gray-700', 'border-gray-300', 'dark:bg-gray-800', 'dark:text-gray-300', 'dark:border-gray-600');
        clashStashBtn.classList.add('bg-white', 'text-gray-700', 'border-gray-300', 'dark:bg-gray-800', 'dark:text-gray-300', 'dark:border-gray-600');
        clashStashBtn.classList.remove('bg-primary-500', 'text-white');
        
        shadowrocketConfig.classList.remove('hidden');
        clashMetaConfig.classList.add('hidden');
        
        shadowrocketRules.classList.remove('hidden');
        clashMetaRules.classList.add('hidden');
      }
      
      // 存储用户选择
      localStorage.setItem('preferredClient', type);
    }
    
    // 设置暗/亮模式
    function handleThemeToggle() {
      const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
      const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

      // 根据当前主题状态切换
      if (document.documentElement.classList.contains('dark')) {
        themeToggleLightIcon.classList.remove('hidden');
        themeToggleDarkIcon.classList.add('hidden');
      } else {
        themeToggleDarkIcon.classList.remove('hidden');
        themeToggleLightIcon.classList.add('hidden');
      }

      // 切换主题
      document.getElementById('theme-toggle').addEventListener('click', function() {
        // 添加过渡效果
        document.documentElement.classList.add('transition');
        document.documentElement.classList.toggle('dark');
        
        // 切换图标
        themeToggleDarkIcon.classList.toggle('hidden');
        themeToggleLightIcon.classList.toggle('hidden');
        
        // 保存主题设置
        if (document.documentElement.classList.contains('dark')) {
          localStorage.theme = 'dark';
        } else {
          localStorage.theme = 'light';
        }
      });
    }
    
    // 初始化
    document.addEventListener('DOMContentLoaded', () => {
      // 设置主题切换图标
      handleThemeToggle();
      
      // 创建规则卡片
      createRuleCards();
      
      // 绑定搜索框事件
      const searchInput = document.getElementById('rule-search');
      searchInput.addEventListener('input', (e) => {
        createRuleCards(e.target.value);
      });
      
      // 绑定按钮事件
      document.getElementById('clash-stash-btn').addEventListener('click', () => {
        switchClientType('clash-meta');
      });
      
      document.getElementById('shadowrocket-btn').addEventListener('click', () => {
        switchClientType('shadowrocket');
      });
      
      // 关闭预览模态窗口
      document.getElementById('close-preview').addEventListener('click', () => {
        document.getElementById('preview-modal').classList.add('hidden');
        // 恢复背景滚动
        document.body.classList.remove('body-noscroll');
      });
      
      document.getElementById('close-preview-btn').addEventListener('click', () => {
        document.getElementById('preview-modal').classList.add('hidden');
        // 恢复背景滚动
        document.body.classList.remove('body-noscroll');
      });
      
      // 复制预览内容
      document.getElementById('copy-preview').addEventListener('click', copyPreviewContent);
      
      // 点击模态窗口背景关闭
      document.getElementById('preview-modal').addEventListener('click', (e) => {
        if (e.target === document.getElementById('preview-modal')) {
          document.getElementById('preview-modal').classList.add('hidden');
          // 恢复背景滚动
          document.body.classList.remove('body-noscroll');
        }
      });
      
      // 阻止预览内容区域的滚动事件冒泡到父元素
      const previewContent = document.getElementById('preview-scroll-container');
      
      // 阻止滚轮事件冒泡
      previewContent.addEventListener('wheel', (e) => {
        e.stopPropagation();
        
        // 检查是否到达滚动边界
        const { scrollTop, scrollHeight, clientHeight } = previewContent;
        const isScrolledToTop = scrollTop === 0;
        const isScrolledToBottom = scrollTop + clientHeight >= scrollHeight - 1;
        
        // 如果向上滚动且已经在顶部，或向下滚动且已经在底部，则阻止默认行为
        if ((e.deltaY < 0 && isScrolledToTop) || (e.deltaY > 0 && isScrolledToBottom)) {
          e.preventDefault();
        }
      }, { passive: false });
      
      // 阻止触摸滚动事件冒泡
      previewContent.addEventListener('touchmove', (e) => {
        e.stopPropagation();
      }, { passive: false });
      
      // 绑定预览按钮点击事件 (使用事件委托)
      document.addEventListener('click', (e) => {
        if (e.target.closest('.preview-btn')) {
          const btn = e.target.closest('.preview-btn');
          const path = btn.dataset.path;
          const name = btn.dataset.name;
          previewRule(path, name);
        }
      });
      
      // 加载用户之前选择的客户端类型
      const preferredClient = localStorage.getItem('preferredClient');
      if (preferredClient === 'shadowrocket') {
        switchClientType('shadowrocket');
      } else {
        // 默认选择 Clash Meta
        switchClientType('clash-meta');
      }
      
      // 添加按钮点击效果
      const buttons = document.querySelectorAll('button');
      buttons.forEach(button => {
        button.addEventListener('mousedown', function() {
          this.classList.add('btn-click');
        });
        button.addEventListener('mouseup', function() {
          this.classList.remove('btn-click');
        });
        button.addEventListener('mouseleave', function() {
          this.classList.remove('btn-click');
        });
      });
      
      // 添加键盘快捷键
      document.addEventListener('keydown', (e) => {
        // ESC 键关闭模态窗口
        if (e.key === 'Escape' && !document.getElementById('preview-modal').classList.contains('hidden')) {
          document.getElementById('preview-modal').classList.add('hidden');
          document.body.classList.remove('body-noscroll');
        }
        
        // Ctrl+F 聚焦搜索框
        if ((e.ctrlKey || e.metaKey) && e.key === 'f' && document.getElementById('preview-modal').classList.contains('hidden')) {
          e.preventDefault();
          document.getElementById('rule-search').focus();
        }
      });
    });
  </script>
</body>

</html>

